(this["webpackJsonpinvoice-react-app"]=this["webpackJsonpinvoice-react-app"]||[]).push([[0],{104:function(t,e,n){},105:function(t,e,n){},132:function(t,e,n){},134:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),i=n(84),r=n.n(i),o=(n(104),n(105),n(4)),s=n(44),l=n(45),j=n(94),d=n(93),u=n(14),h=n(31),b=n(32),p=n(145),m=n(151),O=n(152),x=n(150),f=(n(68),n(2)),v=function(t){return"\u20b9".concat(parseInt(t).toFixed(2))};function g(t){var e=Object(c.useState)(new Array(t.data.length).fill(!1)),n=Object(o.a)(e,2),a=n[0],i=n[1],r=Object(c.useState)(new Array(t.data.length).fill(1)),s=Object(o.a)(r,2),l=s[0],j=s[1],d=Object(c.useState)(0),g=Object(o.a)(d,2),_=g[0],k=g[1],y=Object(c.useState)([]),N=Object(o.a)(y,2),S=N[0],C=N[1];function w(e){C([]);var n=[],c=e.reduce((function(e,c,a){return!0===c?(n.push({product_name:t.data[a].name,product_price:t.data[a].price,quantity:l[a]}),C(n),parseInt(e)+parseInt(t.data[a].price)*parseInt(l[a])):e}),0);k(c)}var I=Object(c.useState)({purchased_items_obj:[],customer_name:"Unknown",contact_no:1234567899,email:"",total_amount:_}),T=Object(o.a)(I,2),A=T[0],D=T[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(p.a,{pt:10,children:Object(f.jsxs)(m.a,{width:450,align:"center",spacing:2,children:[Object(f.jsx)(O.a,{type:"text",placeholder:"Name",onChange:function(t){return function(t){var e=A;e.customer_name=t.target.value,D(e)}(t)}}),Object(f.jsx)(O.a,{type:"tel",placeholder:"Phone number",onChange:function(t){return function(t){var e=A;e.contact_no=t.target.value,D(e)}(t)}}),Object(f.jsx)(O.a,{placeholder:"Enter email",onChange:function(t){return function(t){var e=A;e.email=t.target.value,D(e)}(t)}})]})}),Object(f.jsx)("h2",{children:Object(f.jsx)("strong",{children:"Available Items"})}),Object(f.jsxs)("ul",{className:"shopping-list",children:[t.data.map((function(t,e){var n=t.name,c=t.price;return Object(f.jsx)("li",{children:Object(f.jsxs)("div",{className:"shopping-list-item",children:[Object(f.jsxs)("div",{className:"left-section",children:[Object(f.jsx)("input",{type:"checkbox",id:"custom-checkbox-".concat(e),name:n,value:n,checked:a[e],onChange:function(){return function(t){var e=a.map((function(e,n){return n===t?!e:e}));i(e),w(e)}(e)}}),Object(f.jsx)("label",{htmlFor:"custom-checkbox-".concat(e),children:n})]}),Object(f.jsx)("div",{className:"right-section",children:v(c)}),Object(f.jsxs)("div",{className:"right-section",children:[Object(f.jsx)("button",{children:Object(f.jsx)(h.a,{icon:b.a,onClick:function(){return function(t){if(l[t]>1){var e=Object(u.a)(l);e[t]--,j(e)}w(a)}(e)}})}),Object(f.jsxs)("span",{children:[" ",l[e]," "]}),Object(f.jsx)("button",{children:Object(f.jsx)(h.a,{icon:b.b,onClick:function(){return function(t){var e=l;e[t]=e[t]+1,j(e),w(a)}(e)}})})]})]})},e)})),Object(f.jsx)("li",{children:Object(f.jsxs)("div",{className:"shopping-list-item",children:[Object(f.jsx)("div",{className:"left-section",children:"Total:"}),Object(f.jsx)("div",{className:"right-section",children:v(_)})]})})]}),Object(f.jsx)(x.a,{colorScheme:"teal",size:"lg",type:"submit",onClick:function(t){return function(t){var e=A;e.total_amount=_,e.purchased_items_obj=S,D(e);var n=JSON.stringify(A);fetch("https://invoice-generator-django.herokuapp.com/api/AddCustomer/",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((function(t){return t.json()}))}()},children:"Save"})]})}var _=function(t){return"\u20b9".concat(parseInt(t).toFixed(2))};function k(t){var e=Object(c.useState)(new Array(t.data.length).fill(!1)),n=Object(o.a)(e,2),a=n[0],i=n[1],r=Object(c.useState)(t.count),s=Object(o.a)(r,2),l=s[0],j=s[1],d=Object(c.useState)(new Array(t.data.length).fill(1)),u=Object(o.a)(d,2),p=u[0],m=u[1],O=Object(c.useState)(0),v=Object(o.a)(O,2),g=v[0],k=v[1],y=Object(c.useState)([]),N=Object(o.a)(y,2),S=N[0],C=N[1];function w(e,n){C([]);var c=[],a=e.reduce((function(e,a,i){return!0===a?(c.push({product_name:t.data[i].name,product_price:t.data[i].price,quantity:n[i]}),C(c),parseInt(e)+parseInt(t.data[i].price)*parseInt(n[i])):e}),0);k(a)}var I=Object(c.useState)({purchased_items_obj:[],customer_name:"".concat(t.billdata.customer_name),contact_no:"".concat(t.billdata.contact_no),email:"".concat(t.billdata.email),total_amount:g}),T=Object(o.a)(I,2),A=T[0],D=T[1];"1"===l&&(!function(e){var n=Array(t.data.length).fill(!1),c=Array(t.data.length).fill(1);t.data.map((function(t,a){var i=t.name,r=t.price;m(c);for(var o=0;o<e.purchased_items_obj.length;o++)e.purchased_items_obj[o].product_name===i&&e.purchased_items_obj[o].product_price===r&&(n[a]=!0,c[a]=e.purchased_items_obj[o].quantity)})),i(n),m(c),w(n,c)}(t.billdata),j("0"));return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("h2",{children:Object(f.jsx)("strong",{children:"Update Items"})}),Object(f.jsxs)("ul",{className:"shopping-list",children:[t.data.map((function(t,e){var n=t.name,c=t.price;return Object(f.jsx)("li",{children:Object(f.jsxs)("div",{className:"shopping-list-item",children:[Object(f.jsxs)("div",{className:"left-section",children:[Object(f.jsx)("input",{type:"checkbox",id:"custom-checkbox-".concat(e),name:n,value:n,checked:a[e],onChange:function(){return function(t){var e=a.map((function(e,n){return n===t?!e:e}));i(e),w(e,p)}(e)}}),Object(f.jsx)("label",{htmlFor:"custom-checkbox-".concat(e),children:n})]}),Object(f.jsx)("div",{className:"right-section",children:_(c)}),Object(f.jsxs)("div",{className:"right-section",children:[Object(f.jsx)("button",{children:Object(f.jsx)(h.a,{icon:b.a,onClick:function(){return function(t){if(p[t]>1){var e=p;e[t]=e[t]-1,m(e),w(a,p)}}(e)}})}),Object(f.jsxs)("span",{children:[" ",p[e]," "]}),Object(f.jsx)("button",{children:Object(f.jsx)(h.a,{icon:b.b,onClick:function(){return function(t){var e=p;e[t]=e[t]+1,m(e),w(a,p)}(e)}})})]})]})},e)})),Object(f.jsx)("li",{children:Object(f.jsxs)("div",{className:"shopping-list-item",children:[Object(f.jsx)("div",{className:"left-section",children:"Total:"}),Object(f.jsx)("div",{className:"right-section",children:_(g)})]})})]}),Object(f.jsx)(x.a,{colorScheme:"teal",size:"lg",type:"submit",onClick:function(e){return function(e){var n=A;n.total_amount=g,n.purchased_items_obj=S,D(n);var c=JSON.stringify(A);console.log(c);var a={method:"PUT",headers:{"Content-Type":"application/json"},body:c};fetch("https://invoice-generator-django.herokuapp.com/api/edit-bill/".concat(t.item_id,"/"),a).then((function(t){return t.json()}))}()},children:"Save"})]})}var y=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={loading:!1,itemData:[],billData:[],link_id:""},t}return Object(l.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var t=this;if(this.setState({loading:!0}),"PUT"===this.props.method){var e=window.location.pathname.slice(6);Promise.all([fetch("https://invoice-generator-django.herokuapp.com/api/view-bill/".concat(e,"/")).then((function(t){return t.json()})),fetch("https://invoice-generator-django.herokuapp.com/getItems/").then((function(t){return t.json()}))]).then((function(n){var c=Object(o.a)(n,2),a=c[0],i=c[1];t.setState({loading:!1,itemData:i,billData:a,link_id:e})}))}else fetch("https://invoice-generator-django.herokuapp.com/getItems/").then((function(t){return t.json()})).then((function(e){t.setState({loading:!1,itemData:e})}))}},{key:"render",value:function(){var t;return t=this.state.loading?"loading...":"PUT"===this.props.method?Object(f.jsx)(k,{data:this.state.itemData,billdata:this.state.billData,method:"PUT",item_id:this.state.link_id,count:"1"}):Object(f.jsx)(g,{data:this.state.itemData,method:"GET"}),Object(f.jsx)("div",{children:t})}}]),n}(c.Component),N=n(65),S=n.n(N),C=n(86),w=n(87),I=n.n(w),T=(n(132),n(52)),A=function(){var t=Object(c.useState)([]),e=Object(o.a)(t,2),n=e[0],a=e[1];Object(c.useEffect)((function(){i()}),[]);var i=function(){var t=Object(C.a)(S.a.mark((function t(){var e;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get("https://invoice-generator-django.herokuapp.com/api/CustomerBills/");case 2:e=t.sent,a(e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{id:"title",children:Object(f.jsx)("strong",{children:"Available Invoices"})}),Object(f.jsx)(x.a,{colorScheme:"green",size:"lg",type:"submit",mb:5,onClick:function(t){return window.location.href="/add"},children:"Create New Invoice"}),Object(f.jsxs)("table",{id:"employee",children:[Object(f.jsx)("thead",{children:Object(f.jsx)("tr",{children:["name","email","phone","Edit","Download"].map((function(t,e){return Object(f.jsx)("th",{children:t.toUpperCase()},e)}))})}),Object(f.jsx)("tbody",{children:n&&n.map((function(t){var e=t.id,n=t.customer_name,c=t.email,a=t.contact_no;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:n}),Object(f.jsx)("td",{children:c}),Object(f.jsx)("td",{children:a}),Object(f.jsx)("td",{className:"opration",children:Object(f.jsx)(T.b,{to:{pathname:"/edit/".concat(e),state:{prodIndex:{id:e}}},children:Object(f.jsx)("button",{className:"button",children:"Edit"})})}),Object(f.jsx)("td",{className:"opration",children:Object(f.jsx)("button",{className:"button",onClick:function(t){t.preventDefault(),window.location.href="https://invoice-generator-django.herokuapp.com/download/".concat(e)},children:"Download "})})]},e)}))})]})]})},D=n(149),F=n(11);var P=function(t){return t.props,Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(T.a,{children:Object(f.jsx)("div",{children:Object(f.jsxs)(F.c,{children:[Object(f.jsx)(F.a,{exact:!0,path:"/",children:Object(f.jsx)(D.a,{children:Object(f.jsx)(A,{})})}),Object(f.jsx)(F.a,{exact:!0,path:"/add",children:Object(f.jsx)(D.a,{children:Object(f.jsx)(y,{method:"GET"})})}),Object(f.jsx)(F.a,{path:"/edit",children:Object(f.jsx)(D.a,{children:Object(f.jsx)(y,{method:"PUT"})})})]})})})})},U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,154)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),c(t),a(t),i(t),r(t)}))};r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),U()},68:function(t,e,n){}},[[134,1,2]]]);
//# sourceMappingURL=main.deec47ef.chunk.js.map